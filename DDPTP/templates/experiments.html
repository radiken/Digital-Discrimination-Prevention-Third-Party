{% extends 'base.html' %}
{% block content %}
    <h1>experiments</h1>

    <div>

        <h2>{{ texts.e1_title }}</h2>
        <p>{{ texts.e1_description }}</p>
        <div class="inline-headers">
            <span class="h3 d-inline">{{ texts.e1_dataset1 }}</span> 
            <input class="d-inline" type="button" id="run_e1_d1" name="run_e1_d1" value="run model" />
        </div>
        <div id="e1_d1_result" style="display: none;">
            original score: <span id="e1_d1_original_score"></span>
            <br>
            processed score: <span id="e1_d1_processed_score"></span>
        </div>
        
        <div class="inline-headers">
            <span class="h3 d-inline">{{ texts.e1_dataset2 }}</span> 
            <input class="d-inline" type="button" id="run_e1_d2" name="run_e1_d2" value="run model" />
        </div>
        <div id="e1_d2_result" style="display: none;">
            original score: <span id="e1_d2_original_score"></span>
            <br>
            processed score: <span id="e1_d2_processed_score"></span>
            {{ texts.e1_dataset2_abstraction_description }}
            processed and abstracted score: <span id="e1_d2_abstracted_score"></span>
        </div>
    </div>

    <div>
        <h2>{{ texts.e2_title }}</h2>
        
    </div>

    <script>
    $('#run_e1_d1').click(function(){
        $.ajax({
            type: "POST",
            url: "/experiments/run",
            data: {'action': 'run_e1_d1', 'csrfmiddlewaretoken': '{{ csrf_token }}'},
            dataType: "json",
            success: function(response) {
                $('#e1_d1_original_score').text(response.statlog_original_score);
                $('#e1_d1_processed_score').text(response.statlog_processed_score);
                $('#e1_d1_result').show();
            },
            error: function(rs, e) {
                alert(rs.responseText);
            }
        }); 
    })

    $('#run_e1_d2').click(function(){
        $.ajax({
            type: "POST",
            url: "/experiments/run",
            data: {'action': 'run_e1_d2', 'csrfmiddlewaretoken': '{{ csrf_token }}'},
            dataType: "json",
            success: function(response) {
                $('#e1_d2_original_score').text(response.adult_original_score);
                $('#e1_d2_processed_score').text(response.adult_processed_score);
                $('#e1_d2_abstracted_score').text(response.adult_processed_and_abstracted_score);
                $('#e1_d2_result').show();
            },
            error: function(rs, e) {
                alert(rs.responseText);
            }
        }); 
    })
    </script>
{% endblock %}

